# Bild-an-Eletronic-Speed-Controller-
This project aims to outline an ESC (Electronic Speed Controller) using KiCad, simulate its behavior with LTspice, and study its electronic fundamentals. Based on this, a PCB will be designed and an ESP32 will be used for control purposes.

## 1 Materials
- Controller: ESP32-S3
- 6 Mosfets 
- Drive Gate
- resistor pull-down 
- 2 capcitor bypass
- 1 capacitor bootstrap 
- 1 Diodo Bootstrap

## 2 theoretical fundamentals
### 2.1 ESP32-S3
Responsible for the commutation logic, BEMF (Back Electromotive Force) reading, and PWM generation.<br>
First, we will start with PWM. On ESP32, we can use a module called MCPWM (MOTOR CONROL PULSE WIDTH MODULATION).This module focuses on controlling three-phases motor like BLDCs, and offers high frequency occuracy.
Moreover, The ESP32 outputs a 3.3 V PWM signal 

*according to Espressif's official documatation:* 

> "ESP32-S3 integrates two MCPWMs that can be used to drive digital motors and smart light. Each MCPWM
peripheral has one clock divider (prescaler), three PWM timers, three PWM operators, and a capture module.
PWM timers are used for generating timing references. The PWM operators generate desired waveform based
on the timing references. Any PWM operator can be configured to use the timing references of any PWM
timers. Different PWM operators can use the same PWM timer’s timing references to produce related PWM
signals. PWM operators can also use different PWM timers’ values to produce the PWM signals that work
alone. Different PWM timers can also be synchronized together."
> — *Espressif Documentation, ESP32-S3 MCPWM*

[reference](https://docs.espressif.com/projects/esp-idf/en/latest/esp32s3/api-reference/peripherals/mcpwm.html](https://www.espressif.com/sites/default/files/documentation/esp32-s3_datasheet_en.pdf)

**Pin Assignment**<br>
For MCPWM, the pins used can be chosen from any GPIOs via the GPIO Matrix.<br>

**Advantages**<br>
- High-resolution PWM
- Simultaneous PWM
- Supports Dead-Time insertion

### 2.2 Drive Gate

First, The gate driver amplifies the control signal sent by the ESP32 to the motor's power stage, typically increasing the voltage from 3.3V to 10-12V. This is necessary to properly switch the MOSFETs used in the motor drive. Futhermore, it enable fast commutttion between high-side and low-side MOSFETs, and also allows the bootstrap circuitry for driving high-side MOSFETs.<br>

Some gate drivers also support dead-time insertion, which helps prevent both the high-side and low-side transistors from being on at the same time — a condition that would result in a short circuit. Finally, the gate driver helps to isolate the microcontroller from electrical noise generated by Back-EMF and fast switching transients, improving overall system reliability.

> **Selected driver:IRS2003S **  
| IRS2003S   |
|------------|
| Dead-Time  |

[reference](https://www.alldatasheet.com/datasheet-pdf/view/1238238/INFINEON/IRS2003S.html)

### 2.3 Mosfets 

| Model         | V<sub>DSS</sub> | I<sub>D</sub> | R<sub>DS(on)</sub> | V<sub>GS(th)</sub>  | comment                                                    |
| ------------- | --------------  | ------------- | ------------------ | ------------------ | ----------------------------------------------------------- |
| **IRF3205**   | 55 V            | 110 A         | \~8 mΩ             | 2–4 V              | mainstream. Requires a good cooler                          |

[Datasheet](https://www.alldatasheet.com/datasheet-pdf/view/68131/IRF/IRF3205.html)

For this project, The IRF3205 was chosen owing to its affordability and compatibility with the required gate drive Voltage (Vgs). Furthermore, 6 MOSFETs are needed to bild a three-phase half-bridge: three will operate in high side and three on the low side. 

## 3 METHODS

### 3.1 Bootstrap circuit 

When the Low Side Input is high, the Driver gate send through the low side output's pin a high signal to the gate of low side mosfet. So The path of the current pass the VCC source, it goes to the Diodo Bootstrap, and after charge the capacitor Bootstrap. Finally, the current pass from the drain to source's transistor low side. And that source is connect with the ground, so also the motor's tension stay on ground 

<p align="center">
<img width="509" height="326" alt="image" src="https://github.com/user-attachments/assets/2e1902e8-834b-4009-ad38-e9e5699913b8" />
</p>

In the other hand, when the input of the High Side Input in high in the drive gate, the High output's pin open the transistor's gate of high side mosfet with the help of the capacitor bootstrap. Therefore, the source cennect with the transistor's drain will pass to the source, and it will providing this high tension to the motor 

<p align="center">
<img width="555" height="267" alt="image" src="https://github.com/user-attachments/assets/bd22d915-a22c-4d1d-9f75-3b7442481012" />
</p>










