#include "driver/mcpwm.h"
#include "driver/gpio.h"

#define PWM_GPIO 18  // Pino onde o sinal PWM será gerado

void app_main(void)
{
    // Associa o GPIO ao canal MCPWM
    mcpwm_gpio_init(MCPWM_UNIT_0, MCPWM0A, PWM_GPIO);

    // Estrutura de configuração do PWM
    mcpwm_config_t pwm_config = {
        .frequency = 1000,        // Frequência do PWM (1 kHz)
        .cmpr_a = 50.0,           // Duty cycle do canal A (50%)
        .cmpr_b = 0.0,            // Canal B não será usado
        .counter_mode = MCPWM_UP_COUNTER,
        .duty_mode = MCPWM_DUTY_MODE_0, // PWM ativo em nível alto
    };

    // Inicializa o MCPWM com as configurações acima
    mcpwm_init(MCPWM_UNIT_0, MCPWM_TIMER_0, &pwm_config);
}
